import numpy as np
import random


ignore_n = 1

y = [0.29002368450164795, 0.010774497874081135, 0.0011891918256878853, 0.0013862489722669125, 0.00029153720242902637, 0.008447730913758278, 0.0013661985285580158, 0.0012648390838876367, 0.00037985778180882335, 0.000360208738129586, 0.0003990377008449286, 0.0002971408248413354, 0.0011058419477194548, 0.0018266900442540646, 0.0005649934173561633, 0.0021793153136968613, 0.0007611322216689587, 0.0008056584047153592, 0.008751115761697292, 0.0008440665551461279, 0.0009883882012218237, 0.00037064554635435343, 0.0018193927826359868, 0.0004742582095786929, 0.0038575741928070784, 0.00022255234944168478, 0.00022255234944168478, 0.007370032835751772, 0.0009910704102367163, 0.002871639793738723, 0.0009212541044689715, 0.002500839764252305, 0.0032196417450904846, 0.0008529454353265464, 0.008003913797438145, 0.002645265543833375, 0.0024916199035942554, 0.004840475507080555, 0.007564976345747709, 0.0011696267174556851, 0.0012569293612614274, 0.00015126485959626734, 0.0004521876689977944, 0.009622791782021523, 0.0007876087329350412, 0.00042556170956231654, 0.0003692546742968261, 0.00043705795542337, 0.0007566987769678235, 0.0009589262190274894, 0.00046258821384981275, 0.00039788117283023894, 0.008109002374112606, 0.001766592264175415, 0.001035312656313181, 0.004500465467572212, 0.0010159631492570043, 0.0001736189005896449, 0.006591449957340956, 0.007723146118223667, 0.0007867359090596437, 0.0027146374341100454, 0.00022103291121311486, 0.0007240449776872993, 0.0001918620546348393, 0.0004754895344376564, 0.00046526576625183225, 0.008198902942240238, 0.0028711550403386354, 0.001535390387289226, 0.0014099213294684887, 0.0017831263830885291, 0.0031438912265002728, 0.0010129613801836967, 5.053825952927582e-05, 9.496512939222157e-05, 9.496512939222157e-05, 0.007995100691914558, 0.001425910391844809, 7.638805254828185e-05, 0.0006620680214837193, 0.0002926757442764938, 0.0019532274454832077, 0.006591449957340956, 0.000556103594135493, 0.0008638928411528468, 0.006591449957340956, 0.00043325909064151347, 0.00029469956643879414, 0.006591449957340956, 0.00028197982464917004, 0.0006001596339046955, 0.00822085328400135, 0.00029848809936083853, 0.0007331357337534428, 0.00013746295007877052, 0.0003637409536167979, 0.0003490159288048744, 0.00027921274886466563, 0.0005033767665736377, 0.0014022339601069689, 0.0003256560885347426, 0.0005097920657135546, 0.008698759600520134, 0.0007904372760094702, 7.671248022234067e-05, 7.671248022234067e-05, 0.00012150171824032441, 7.671248022234067e-05, 0.0007649284088984132, 7.458462641807273e-05, 0.00012267063721083105, 0.00047481461660936475, 0.0007756833801977336, 0.008593990467488766, 0.0019779084250330925, 0.0007676466484554112, 0.0022312458604574203, 0.0005773850716650486, 5.265698200673796e-05, 0.0011179054854437709, 0.0004615489742718637, 0.009959693998098373, 8.923224231693894e-05, 0.0012728500878438354, 0.0023805336095392704, 0.0004161875694990158, 0.011720938608050346, 0.0006513733533211052, 0.00035623504663817585, 5.561838042922318e-05, 0.00018458449630998075, 0.0005409747245721519, 0.0007622364209964871, 0.0006717166397720575, 0.00033740425715222955, 0.0038369062822312117, 0.0019482242641970515, 0.0005307106766849756, 0.0013729594647884369, 0.0009346985607407987, 0.007416161708533764, 0.003298845374956727, 0.0009496391867287457, 0.00033314089523628354, 0.0009302446851506829, 0.00023256117128767073, 0.009426732547581196, 0.0010958033381029963, 0.00021866077440790832, 0.00021866077440790832, 6.31743751000613e-05, 0.0006431657820940018, 0.0011591427028179169, 0.0002574037935119122, 0.0002973236551042646, 0.0005086928140372038, 0.0001495839678682387, 0.007829496636986732, 0.00031188884167931974, 5.818300269311294e-05, 0.00023273201077245176, 0.00039376842323690653, 0.00023273201077245176, 0.00023273201077245176, 0.0002618235012050718, 0.0005389360012486577, 0.000671945686917752, 0.00032815305166877806, 0.0007296298863366246, 0.006989222019910812, 4.192145570414141e-05, 4.192145570414141e-05, 0.0006087295478209853, 0.00011863393592648208, 0.0003496035060379654, 0.00022080447524785995, 0.00023127890017349273, 7.671248022234067e-05, 7.671248022234067e-05, 7.671248022234067e-05, 0.0006087295478209853, 0.00011801264918176457, 0.0006087295478209853, 0.0011766708921641111, 0.00036572711542248726, 0.007134273648262024, 0.0019774779211729765, 0.0009505823254585266, 0.00160218495875597, 0.00017898951773531735, 0.00017898951773531735, 0.0014912249753251672, 0.0010824804194271564, 0.00027247561956755817, 0.00020447265706025064, 0.0003489355440251529, 0.00027740708901546896, 0.0020418507046997547, 0.00016452724230475724, 0.00027859071269631386, 0.00012761566904373467, 0.000544330570846796, 0.00019363118917681277, 0.007112288381904364, 0.0009823995642364025, 0.0001330034720012918, 0.005474824458360672, 0.00010805574129335582, 0.00010805574129335582, 0.00010805574129335582, 0.0009138198802247643, 0.00023180230346042663, 0.0014453172916546464, 0.00013764426694251597, 0.0006120480829849839, 8.974103548098356e-05, 0.0008131986833177507, 8.974103548098356e-05, 0.013924317434430122, 0.0007927906699478626, 0.0005961175775155425, 0.00042251369450241327, 0.00022113775776233524, 0.00036884992732666433, 7.638805254828185e-05, 0.0005167063791304827, 0.0002994928800035268, 0.00014383892994374037, 0.00037513847928494215, 0.0012801724951714277, 0.00047597545199096203, 0.00015256370534189045, 0.000179616516106762, 0.0004079509526491165, 0.0005179644795134664, 0.00030002600396983325, 0.0106271430850029, 0.00035872258013114333, 0.0002763929369393736, 0.0002566217735875398, 0.0003474802360869944, 0.0005427569849416614, 0.00019068655092269182, 6.352414493449032e-05, 0.008792025037109852, 0.00037352018989622593, 0.0003140009066555649, 0.0010995815973728895, 0.00020088814198970795, 5.951931234449148e-05, 5.951931234449148e-05, 5.951931234449148e-05, 0.00010879149340325966, 0.0010974686592817307, 0.00026148432516492903, 0.00010940938955172896, 0.00020243864855729043, 0.00029240359435789287, 0.010198728181421757, 0.00010976051271427423, 0.00035371212288737297, 0.00015285328845493495, 9.145571675617248e-05, 0.0006578059983439744, 0.00013317425327841192, 8.825032273307443e-05, 0.00015911889204289764, 0.0001778098230715841, 0.0001509043067926541, 0.00041044107638299465, 0.008464423008263111, 0.0009677651105448604, 0.0006605549715459347, 0.0009238676866516471, 0.00017469168233219534, 0.00020319182658568025, 0.00842420943081379, 0.000472624902613461, 0.00019906144007109106, 0.0008047586889006197, 0.0008207918144762516, 0.0006808973848819733, 0.0005378879723139107, 0.000110586617665831, 0.000620354781858623, 5.815826079924591e-05, 0.00022646246361546218, 0.00023647966736461967, 0.00020759737526532263, 0.00016786716878414154, 0.0002758511691354215, 0.0005859906086698174, 0.006699044723063707, 0.00022437622828874737, 0.0008874476188793778, 0.0001270343636861071, 0.0016678710235282779, 5.4387099226005375e-05, 5.4387099226005375e-05, 5.4387099226005375e-05, 5.4387099226005375e-05, 5.4387099226005375e-05]
# x = range(0, len(y))
x = np.arange(len(y) - ignore_n)

print('x: ', len(x))
y = np.array(y)
idx_y = np.argsort(y)[::-1]

y = y[idx_y]

print('y: ' ,len(y))

y = y[ignore_n:]
print('new y: ' ,len(y))



from kneed import KneeLocator
kn = KneeLocator(x, y, curve='convex', direction='decreasing', S=3)
print(kn.knee)

import matplotlib.pyplot as plt
plt.xlabel('k')
plt.ylabel('PageRank values')
plt.plot(x, y, 'bx-')
plt.vlines(kn.knee, plt.ylim()[0], plt.ylim()[1], linestyles='dashed')
plt.show()
